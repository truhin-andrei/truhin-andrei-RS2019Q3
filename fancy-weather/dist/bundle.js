!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";var a,i={},s=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function r(e,t){for(var n=[],a={},i=0;i<e.length;i++){var s=e[i],o=t.base?s[0]+t.base:s[0],r={css:s[1],media:s[2],sourceMap:s[3]};a[o]?a[o].parts.push(r):n.push(a[o]={id:o,parts:[r]})}return n}function c(e,t){for(var n=0;n<e.length;n++){var a=e[n],s=i[a.id],o=0;if(s){for(s.refs++;o<s.parts.length;o++)s.parts[o](a.parts[o]);for(;o<a.parts.length;o++)s.parts.push(f(a.parts[o],t))}else{for(var r=[];o<a.parts.length;o++)r.push(f(a.parts[o],t));i[a.id]={id:a.id,refs:1,parts:r}}}}function d(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var a=n.nc;a&&(e.attributes.nonce=a)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function h(e,t,n,a){var i=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var s=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function g(e,t,n){var a=n.css,i=n.media,s=n.sourceMap;if(i&&e.setAttribute("media",i),s&&btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var p=null,m=0;function f(e,t){var n,a,i;if(t.singleton){var s=m++;n=p||(p=d(t)),a=h.bind(null,n,s,!1),i=h.bind(null,n,s,!0)}else n=d(t),a=g.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s());var n=r(e,t);return c(n,t),function(e){for(var a=[],s=0;s<n.length;s++){var o=n[s],d=i[o.id];d&&(d.refs--,a.push(d))}e&&c(r(e,t),t);for(var l=0;l<a.length;l++){var u=a[l];if(0===u.refs){for(var h=0;h<u.parts.length;h++)u.parts[h]();delete i[u.id]}}}}},function(e,t,n){var a=n(2);"string"==typeof a&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};n(0)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){},function(e,t,n){var a=n(4);"string"==typeof a&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};n(0)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(1),n(3);function a(){return"en"===localStorage.getItem("lang")||"En"===localStorage.getItem("lang")?["Feels like","Wind","Humidity","Latitude","Longitude","Search city","Search"]:["Ощущается","Ветер","Влажность","Широта","Долгота","Введите город","Поиск"]}function i(){const e=document.getElementById("selectLang");"en"===localStorage.getItem("lang")||"En"===localStorage.getItem("lang")?(e.options[0].innerText="En",e.options[1].innerText="Ru",e.defaultSelected=0,e.options[0].selected=!0):(e.options[0].innerText="Ru",e.options[1].innerText="En",e.defaultSelected=0,e.options[0].selected=!0)}function s(e){return Math.round(e-273.15)}function o(e){return 1.8*e+32}function r(e){return o(s(e))}function c(e){return 5/9*(e-32)}function d(e){return Math.trunc(e)}function l(e){return Math.trunc(60*(e-d(e)))}var u={MINUTE_IN_MILISEC:6e3};!function(){const e=document.querySelector("body"),t=a();e.innerHTML=` <div class="container">\n<div class="control-panel">\n  <div class="btn">\n    <button id="reloadBtn" class="btn__reload">              \n        <svg id="reloader" width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path id=""  d="M14.0492 23.7003C13.9314 22.6417 14.0296 21.6198 14.2966 20.6753C15.1841 17.5362 17.9684 15.2278 21.2711 15.1871V13.1351C21.2711 13.0211 21.4086\n           12.96 21.4989 13.0292L25.5713 16.1316C25.638 16.1845 25.638 16.2904 25.5713 16.3392L21.5028 19.4416C21.4086 19.5108 21.275 19.4498 21.275 19.3358V17.2879C19.1034\n            17.3245 17.2498 18.7129 16.4526 20.6753C16.1502 21.4162 15.997 22.2346 16.0402 23.0936C16.0991 24.2743 16.5272 25.3614 17.2027 26.2408C17.5639 26.709 17.4775 27.393\n             17.0102 27.7472C16.5665 28.0851 15.946 27.9915 15.6043 27.5436C14.7679 26.4607 14.2102 25.1415 14.0492 23.7003ZM25.8069 19.7592C26.4863 20.6345 26.9144 21.7257\n              26.9693 22.9064C27.0125 23.7695 26.8554 24.5878 26.557 25.3247C25.7598 27.2871 23.9062 28.6796 21.7345 28.7121V26.6642C21.7345 26.5502 21.5971 26.4892 21.5067\n               26.5584L17.4344 29.6607C17.3676 29.7137 17.3676 29.8195 17.4344 29.8684L21.5028 32.9708C21.5971 33.04 21.7306 32.9789 21.7306 32.8649V30.8129C25.0333 30.7763\n                27.8215 28.4678 28.7051 25.3247C28.9721 24.3802 29.0664 23.3583 28.9525 22.2997C28.7954 20.8585 28.2378 19.5393 27.4013 18.4564C27.0557 18.0085 26.4392\n                 17.9149 25.9954 18.2528C25.532 18.6 25.4 19.291 25.8069 19.7592Z" fill="white"/>\n        </svg>\n    </button>\n    <select id="selectLang" class="btn__lang">\n        <option value=”En”>En</option>                   \n        <option value=”Ru”>Ru</option>                                      \n    </select>\n    <div  id="btnDeg" class="btn__deg-wrap">\n        <button id="btnC" class="btn__deg-c">C</button><button id="btnF" class="btn__deg-f">F</button>\n    </div>    \n  </div>\n  <form action="#" class="search">\n    <input id="searchInput" type="text" class="search__input" placeholder="${t[5]}">\n    <div id="audioSearchBtn" class="search__btn--audio">v</div>\n    <button id="searchBtn" class="search__btn">${t[6]}</button>\n  </form>\n</div>\n<div class="info">\n  <div class="weather">\n     \n    <div class="location"><span id="city"></span><span id="country"></span> </div>\n    <div id="date" class="date"><span id="day"></span> <span id="date"></span> <span id="month"></span> \n        <span id="time"></span></div>\n    <div class="forecast">\n        <div class="forecast__deg"><span id="degToday"></span>&deg;</div>\n        <div class="forecast__desc">\n            <div id="cast" class="forecast__cloud">overcast</div>\n            <div class="pressure">${t[0]}: <span id="apparentTemp"></span>&deg;</div>\n            <div class="wind">${t[1]}: <span id="wind"></span>m/s </div>\n            <div class="humidity">${t[2]}: <span id="humidity"></span>%</div>\n        </div>\n    </div>\n    <div class="next-forecast">\n        <div class="next-forecast__day"><span class="nextDay"></span> <span id="nextForecast1" class="next-forecast__degr"></span></div>\n        <div class="next-forecast__day"><span class="nextDay"></span> <span id="nextForecast2" class="next-forecast__degr"></span></div>\n        <div class="next-forecast__day"><span class="nextDay"></span> <span id="nextForecast3" class="next-forecast__degr"></span></div>\n    </div>\n</div>\n<div class="position">       \n        <div id="map" class="map"></div>\n        <div class="latitude"><span class="latitude__name">${t[3]}: </span><span id="latitude" class="latitude__value">53&deg;54&prime;</span></div>\n        <div class="longitude"><span class="longitude__name">${t[4]}: </span><span id="longitude" class="longitude__value">53&deg;54&prime;</span></div>    \n</div>\n</div>\n\n  \n</div>\n<div id="screenSaver" class="screen-saver">\n<div id="fountainG" >\n  <div id="fountainG_1" class="fountainG"></div>\n  <div id="fountainG_2" class="fountainG"></div>\n  <div id="fountainG_3" class="fountainG"></div>\n  <div id="fountainG_4" class="fountainG"></div>\n  <div id="fountainG_5" class="fountainG"></div>\n  <div id="fountainG_6" class="fountainG"></div>\n  <div id="fountainG_7" class="fountainG"></div>\n  <div id="fountainG_8" class="fountainG"></div>\n</div>\n</div>`}(),i();let h=localStorage.getItem("lang")||"en";const g=document.getElementById("searchBtn"),p=document.getElementById("reloadBtn"),m=document.getElementById("btnDeg"),f=document.getElementById("audioSearchBtn"),y=document.getElementById("screenSaver"),v=document.getElementById("selectLang"),w=new class{constructor(e,t,n,a){this.lang=e.toLowerCase(),this.latitude=t,this.longitude=n,this.city=a}setLang(e){this.lang=e}getPosition(){navigator.geolocation.getCurrentPosition(e=>{const t=e.coords;this.latitude=t.latitude,this.longitude=t.longitude,console.log(this.latitude),this.renderCoord(),this.getNameArea()},(function(e){console.log("error of location"),console.warn(`ERROR(${e.code}): ${e.message}`)}))}renderCoord(){const e=document.getElementById("latitude"),t=document.getElementById("longitude");e.innerHTML=`${d(this.latitude)}&deg; ${l(this.latitude)}&prime;`,t.innerHTML=`${d(this.longitude)}&deg; ${l(this.longitude)}&prime;`}renderCity(){document.getElementById("city").innerText=this.city}renderCountry(){document.getElementById("country").innerText=`, ${this.country}`}getNameArea(){fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=b58ea381-e37e-43d1-95fc-ec3da56fccd0&format=json&geocode=${this.longitude},${this.latitude}&kind=locality&lang=${`${this.lang}_RU`}&results=1`).then(e=>e.json()).then(e=>{this.city=e.response.GeoObjectCollection.featureMember[0].GeoObject.name,this.country=e.response.GeoObjectCollection.featureMember[0].GeoObject.description,this.renderCity(),this.renderCountry()})}async getDataBySearch(e){fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=b58ea381-e37e-43d1-95fc-ec3da56fccd0&format=json&geocode=${e}&kind=locality&lang=${`${this.lang}_RU`}&results=1`).then(e=>e.json()).then(e=>{this.city=e.response.GeoObjectCollection.featureMember[0].GeoObject.name,this.country=e.response.GeoObjectCollection.featureMember[0].GeoObject.description;const t=e.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" ");[this.longitude,this.latitude]=t,this.renderCity(),this.renderCountry(),this.renderCoord()}).catch(e=>{console.log("error getDataBySearch"),console.warn(`ERROR(${e.code}): ${e.message}`)})}async getCity(){const e=await fetch("https://ipinfo.io?token=a4998744625b7b",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({})}),t=await e.json(),n=t.loc.split(",");[this.latitude,this.longitude]=n,this.city=t.city,this.renderCoord(),this.getNameArea()}}(h),b=new class{constructor(e){this.myMap=e}init(e){this.location=e}async render(){const e=()=>{this.myMap=new window.ymaps.Map("map",{center:[this.location.latitude,this.location.longitude],zoom:10})};try{window.ymaps.ready(e)}catch(e){console.log("error Map"),console.warn(`ERROR(${e.code}): ${e.message}`)}}reRender(){this.myMap.setCenter([this.location.latitude,this.location.longitude],6)}},_=new class{constructor(e,t){this.lang=e,this.now1=t}getDate(e=0){const t=new Date,n=t.getTime()+60*t.getTimezoneOffset()*1e3;return this.now1=new Date(n+1e3*e),new Intl.DateTimeFormat(this.lang,{weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).format(this.now1)}setLang(e){this.lang=e}render(e){document.getElementById("date").innerHTML=this.getDate(e),this.renderForecastDay()}renderForecastDay(){const e=document.querySelectorAll(".nextDay"),t=new Intl.DateTimeFormat(this.lang,{weekday:"long"});for(let n=0;n<e.length;n+=1){const a=new Date(`${this.now1.getFullYear()},${this.now1.getMonth()+1}, ${this.now1.getDate()+1+n}`);e[n].innerText=t.format(a)}}}(h),I=new class{constructor(e,t,n,a,i,s,o,r,c,d){this.lang=e,this.temp=t,this.condition=n,this.windValue=a,this.humidity=i,this.sunrise=s,this.sunset=o,this.apparentTemp=r,this.timeZone=c,this.main=d,this.mainDeg=document.querySelector(".forecast"),this.forecast=document.querySelectorAll(".next-forecast__day")}init(e){this.location=e}setLang(e){this.lang=e}async getWeather(e=this.location.city){try{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&lang=${this.lang}&APPID=529de013e9d3c2c6528f81831ab3aa2f`),n=await t.json();localStorage.getItem("unit")||localStorage.setItem("unit","C"),this.temp="C"===localStorage.getItem("unit")?Math.round(s(n.main.temp)):Math.round(r(n.main.temp)),this.condition=n.weather[0].description,this.apparentTemp="C"===localStorage.getItem("unit")?Math.round(s(n.main.feels_like)):Math.round(r(n.main.feels_like)),this.windValue=n.wind.speed,this.humidity=n.main.humidity,this.sunrise=n.sys.sunrise,this.sunset=n.sys.sunset,this.timeZone=n.timezone,this.main=n.weather[0].main,this.getIcon(n.weather[0].icon)}catch(e){console.log("error of getWeather")}}async getForecast(){try{const e=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${this.location.city}&cnt=26&lang=en&APPID=529de013e9d3c2c6528f81831ab3aa2f`),t=await e.json();this.renderForecast(t.list)}catch(e){console.log("error of forecast"),console.warn(`ERROR(${e.code}): ${e.message}`)}}async getIcon(e,t=!1){try{const n=await fetch(`https://openweathermap.org/img/wn/${e}@2x.png`),a=await n.blob();t?this.renderForecastIcon(a,t-1):this.renderIcon(a)}catch(e){console.log("error of geticon"),console.warn(`ERROR(${e.code}): ${e.message}`)}}renderIcon(e){const t=document.createElement("IMG");t.classList.add("mainDegImg"),this.mainDeg.append(t),t.src=URL.createObjectURL(e)}renderForecastIcon(e,t){const n=document.createElement("IMG");n.classList.add("forecastImg"),this.forecast[t].append(n),n.src=URL.createObjectURL(e)}renderForecast(e){const t=document.getElementsByClassName("next-forecast__degr");for(let n=0;n<3;n+=1)t[n].innerHTML="C"===localStorage.getItem("unit")?`${Math.round(s(e[8*(n+1)].main.temp))}&deg;`:`${Math.round(r(e[8*(n+1)].main.temp))}&deg;`,this.getIcon(e[8*(n+1)].weather[0].icon,n+1)}render(){const e=document.getElementById("degToday"),t=document.getElementById("cast"),n=document.getElementById("wind"),a=document.getElementById("humidity"),i=document.getElementById("apparentTemp");e.innerText=this.temp,t.innerText=this.condition,n.innerText=this.windValue,a.innerText=this.humidity,i.innerText=this.apparentTemp}}(h),C=new class{constructor(e){this.photoArray=e,this.now=new Date}init(e){this.weather=e}async getWallpaper(){const e=`https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=3ae54ce17ef1d06ba9a9aeb7a6e1579f&tags=\n    ${this.getDayOrNight()}, ${this.weather.main}, ${this.getSeason()}&tag_mode=all&sort=relevance&per_page=20&content_type=4&format=json&nojsoncallback=1`;try{const t=await fetch(e),n=await t.json();this.photoArray=n.photos.photo}catch(e){throw new Error(e)}}render(){const e=Math.floor(19*Math.random()),t=this.photoArray[e],n=`https://farm${t.farm}.static.flickr.com/${t.server}/${t.id}_${t.secret}_b.jpg`;document.querySelector(".container").style.backgroundImage=`url(${n}) `}getNow(){return this.now}getDayOrNight(){return this.getNow()>this.weather.sunrise&&this.getNow()<this.weather.sunset?"day":"night"}getSeason(){return 11===this.getNow().getMonth()||this.getNow().getMonth()<2?"winter":this.getNow().getMonth()>1&&this.getNow().getMonth()<5?"spring":this.getNow().getMonth()>4&&this.getNow().getMonth()<8?"summer":"fall"}},T=new class{init(e,t,n,a,i){this.location=e,this.weather=t,this.wallpaper=n,this.map=a,this.dateNow=i}async searchApply(){const e=document.getElementById("searchInput");let t="";e.value.match(/\d/g)||(t=e.value),""!==t&&(e.value="",this.location.getDataBySearch(t),await this.weather.getWeather(t),await this.wallpaper.getWallpaper(),this.wallpaper.render(),await this.weather.render(),await this.weather.getForecast(),this.map.reRender(),this.dateNow.render(this.weather.timeZone))}},M=new class{constructor(){this.unit=localStorage.getItem("unit"),this.btnC=document.getElementById("btnC"),this.btnF=document.getElementById("btnF"),this.mainDeg=document.getElementById("degToday"),this.apparentTemp=document.getElementById("apparentTemp"),this.forecastEl=document.getElementsByClassName("next-forecast__degr")}madeToggleBtnActive(){localStorage.getItem("unit")||this.btnC.classList.add("btn__deg--active"),"C"===localStorage.getItem("unit")?this.btnC.classList.add("btn__deg--active"):this.btnF.classList.add("btn__deg--active")}toggleToC(){localStorage.setItem("unit","C"),this.btnC.classList.add("btn__deg--active"),this.btnF.classList.remove("btn__deg--active")}toggleToF(){localStorage.setItem("unit","F"),this.btnF.classList.add("btn__deg--active"),this.btnC.classList.remove("btn__deg--active")}reRender(){this.reRenderMain(),this.reRenderForecast(),this.reRenderApparentTemp()}reRenderMain(){const e="F"===localStorage.getItem("unit")?c(this.mainDeg.innerText):o(this.mainDeg.innerText);this.mainDeg.innerText=Math.round(e)}reRenderApparentTemp(){const e="F"===localStorage.getItem("unit")?c(this.apparentTemp.innerText):o(this.apparentTemp.innerText);this.apparentTemp.innerText=Math.round(e)}reRenderForecast(){let e;for(let t=0;t<3;t+=1)"F"===localStorage.getItem("unit")?(e=c(parseInt(this.forecastEl[t].innerText,10)),this.forecastEl[t].innerText=Math.round(e)):(e=o(parseInt(this.forecastEl[t].innerText,10)),this.forecastEl[t].innerText=Math.round(e))}};(async function(){M.madeToggleBtnActive(),await w.getCity(),b.init(w),await b.render(),_.render(),I.init(w),await I.getWeather(),C.init(I),await C.getWallpaper(),C.render(),await I.render(),await _.render(I.timeZone),await I.getForecast(),T.init(w,I,C,b,_)})().then(()=>{y.style.display="none"}),setInterval(()=>{_.render(I.timeZone)},u),g.addEventListener("click",()=>{y.style.display="display",T.searchApply().then(()=>{y.style.display="none"})}),p.addEventListener("click",()=>{C.render()}),m.addEventListener("click",e=>{"btnC"===e.target.id&&("F"===localStorage.getItem("unit")&&M.reRender(),M.toggleToC()),"btnF"===e.target.id&&("C"===localStorage.getItem("unit")&&M.reRender(),M.toggleToF())}),f.addEventListener("click",()=>{!function(e){const t=document.getElementById("searchInput");window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;const n=new window.SpeechRecognition;n.lang=e,n.addEventListener("result",e=>{t.value=e.results[0][0].transcript}),n.start()}(h)}),v.addEventListener("change",()=>{h=v.options[v.selectedIndex].innerText,localStorage.setItem("lang",h),_.setLang(h),I.setLang(h),I.getWeather().then(()=>{I.render()}),w.setLang(h),w.getNameArea(),i(),function(){const e=a(),t=document.getElementById("searchInput"),n=document.getElementById("searchBtn"),i=document.querySelector(".pressure"),s=document.querySelector(".wind"),o=document.querySelector(".humidity"),r=document.querySelector(".latitude__name"),c=document.querySelector(".longitude__name");[t.placeholder,n.innerHTML]=[e[5],e[6]],i.outerHTML=`<div class="pressure">${e[0]}: <span id="apparentTemp"></span>&deg;</div>`,s.outerHTML=`<div class="wind">${e[1]}: <span id="wind"></span>m/s </div>`,o.outerHTML=`<div class="humidity">${e[2]}: <span id="humidity"></span>%</div>`,r.outerHTML=`<span class="latitude__name">${e[3]}: </span>`,c.outerHTML=`<span class="longitude__name">${e[4]}: </span>`}()})}]);